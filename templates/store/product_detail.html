{% extends 'base.html' %}
{% load static %}

{% block content %}
<section class="section-content padding-y bg-light">
    <div class="container">

        <!-- ============================ PRODUCT DETAILS ================================= -->
        <div class="row">
            <div class="col-md-6">
                <div class="card border-0 shadow-sm">
                    <div class="card-body product-image-wrapper">
                        <div class="d-flex justify-content-center">
                            <img src="{{ single_product.image.url }}" alt="{{ single_product.product_name }}" class="img-fluid rounded">
                        </div>
                    </div> <!-- card-body.// -->
                </div> <!-- card.// -->
            </div> <!-- col.// -->
            
            <div class="col-md-6">
                <div class="card border-0 shadow-sm">
                    <div class="card-body">
                        <h2 class="card-title">{{ single_product.product_name }}</h2>
                        <p class="card-text h4 mb-3">${{ single_product.price }}</p>
                        
                        <p class="card-text">{{ single_product.description }}</p>
                        
                        <hr>

                        <!-- Variations Display -->
                        {% if variation_categories %}
                            <div class="mb-3">
                                <h5 class="mb-2">Select Variations</h5>
                                {% for category, variations in variation_categories.items %}
                                    <div class="mb-3">
                                        <label for="{{ category|lower }}" class="form-label">{{ category|capfirst }}</label>
                                        <select name="{{ category|lower }}" id="{{ category|lower }}" class="form-select" required>
                                            <option value="" disabled selected>Select {{ category|capfirst }}</option>
                                            {% for variation in variations %}
                                                <option value="{{ variation.variation_value|lower }}">{{ variation.variation_value|capfirst }}</option>
                                            {% empty %}
                                                <option value="" disabled>No {{ category|capfirst }} available</option>
                                            {% endfor %}
                                        </select>
                                    </div>
                                {% endfor %}
                            </div>
                        {% else %}
                            <p class="text-muted">This product has no variations.</p>
                        {% endif %}

                        <hr>

                        {% if single_product.stock <= 0 %}
                            <p class="text-danger h5">Out of Stock</p>
                        {% else %}
                            <form action="{% url 'add_cart' single_product.id %}" method="POST">
                                {% csrf_token %}
                                <button type="submit" class="btn btn-primary">
                                    <span class="text">Add to cart</span>
                                    <i class="fas fa-shopping-cart"></i>
                                </button>
                            </form>
                        {% endif %}
                    </div> <!-- card-body.// -->
                </div> <!-- card.// -->
            </div> <!-- col.// -->
        </div> <!-- row.// -->
        <!-- ============================ PRODUCT DETAILS END ================================= -->

        <br>

        <!-- ============================ CUSTOMER REVIEWS ================================= -->
        <div class="row">
            <div class="col-md-9">
                <header class="section-heading mb-4">
                    <h3>Customer Reviews</h3>
                </header>

                <div class="card border-0 shadow-sm">
                    <div class="card-body">
                        <div class="d-flex align-items-start mb-3">
                            <img src="{% static 'images/avatars/avatar1.jpg' %}" class="img-xs icon rounded-circle me-3" alt="Customer Avatar">
                            <div>
                                <span class="date text-muted">24.04.2020</span>
                                <h6 class="mb-1">Mike John</h6>
                                <p>
                                    Dummy comment Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
                                    tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
                                    quis nostrud exercitation ullamco laboris nisi ut aliquip.
                                </p>
                            </div>
                        </div> <!-- d-flex.// -->
                    </div> <!-- card-body.// -->
                </div> <!-- card.// -->
            </div> <!-- col.// -->
        </div> <!-- row.// -->
        <!-- ============================ CUSTOMER REVIEWS END ================================= -->

    </div> <!-- container .//  -->
</section>
<!-- ========================= SECTION CONTENT END// ========================= -->


<!-- Custom CSS for image size and hover effect -->
<style>
    .product-image-wrapper {
        position: relative;
        overflow: hidden;
        width: 100%; /* Ensure the wrapper fits within its parent */
        height: 300px; /* Fixed height, adjust as needed */
        display: flex;
        align-items: center;
        justify-content: center;
    }
    
    .product-image-wrapper img {
        width: 100%;
        height: 300px;
        object-fit: cover; /* Ensures image covers the area and maintains aspect ratio */
        transition: transform 0.3s ease-in-out;
    }
    
    .product-image-wrapper:hover img {
        transform: scale(1.05); /* Slight zoom effect on hover */
    }
    
    @media (max-width: 768px) {
        .product-image-wrapper {
            height: 250px; /* Adjust height for smaller screens */
        }
    }
    
    @media (max-width: 576px) {
        .product-image-wrapper {
            height: 200px; /* Further adjust height for very small screens */
        }
    }
    </style>
{% endblock content %}
